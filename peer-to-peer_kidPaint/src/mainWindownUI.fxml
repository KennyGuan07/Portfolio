<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.String?>
<?import javafx.collections.FXCollections?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.canvas.Canvas?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.SplitPane?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Rectangle?>
<?import javafx.scene.text.Font?>

<StackPane fx:id="rootStack" prefHeight="600.0" prefWidth="900.0" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1">

    <BorderPane style="-fx-background-color: #eaeaea;">
        <top>
            <VBox>
                <HBox alignment="CENTER" style="-fx-background-color: #2c3e50; -fx-padding: 10;">
                    <Label fx:id="lblTopInfo" text="Waiting for game start..." textFill="WHITE">
                        <font>
                            <Font name="System Bold" size="20.0" />
                        </font>
                    </Label>
                </HBox>

                <HBox alignment="CENTER_LEFT" spacing="12.0" style="-fx-background-color: white; -fx-padding: 8; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 5, 0, 0, 2);">
                    <padding><Insets bottom="5" left="15" right="15" top="5" /></padding>

                    <Label text="Tool:" textFill="#777777"><font><Font name="System Bold" size="12.0" /></font></Label>
                    <ComboBox fx:id="cmbTool" prefWidth="110.0" style="-fx-background-color: #f0f0f0;" value="Pen">
                        <items>
                            <FXCollections fx:factory="observableArrayList">
                                <String fx:value="Pen" />
                                <String fx:value="Bucket" />
                                <String fx:value="Eraser" />
                            </FXCollections>
                        </items>
                    </ComboBox>

                    <Button fx:id="btnSave" text="Save" />
                    <Button fx:id="btnLoad" text="Load" />
                    <Button fx:id="btnClear" text="Clear Canvas" textFill="#c0392b" />

                    <Pane HBox.hgrow="ALWAYS" />

                    <HBox alignment="CENTER" spacing="8" style="-fx-background-color: #f9f9f9; -fx-padding: 5; -fx-border-radius: 5; -fx-border-color: #eee;">
                        <Label text="Color:" textFill="#777777" />
                        <Rectangle fx:id="rectCurrentColor" arcHeight="5.0" arcWidth="5.0" fill="BLACK" height="25.0" stroke="#999999" width="25.0" />
                        <Button fx:id="btnSelectColor" style="-fx-background-color: #3498db; -fx-text-fill: white;" text="Select Color â–¼" />
                    </HBox>
                </HBox>
            </VBox>
        </top>

        <center>
            <StackPane style="-fx-background-color: #333333; -fx-padding: 20;">
                <StackPane fx:id="canvasContainer" maxHeight="Infinity" maxWidth="Infinity">
                    <Canvas fx:id="canvas" />
                    <effect>
                        <DropShadow height="50.0" radius="24.5" width="50.0" />
                    </effect>
                </StackPane>
            </StackPane>
        </center>

        <right>
            <SplitPane dividerPositions="0.4" orientation="VERTICAL" prefWidth="260.0" style="-fx-background-color: white;">
                <VBox>
                    <Label alignment="CENTER" maxWidth="Infinity" style="-fx-background-color: #f1c40f; -fx-padding: 8;" text="ðŸ† Leaderboard" textFill="#2c3e50">
                        <font><Font name="System Bold" size="14.0" /></font>
                    </Label>
                    <ListView fx:id="leaderboardList" VBox.vgrow="ALWAYS" />
                </VBox>
                <VBox>
                    <Label alignment="CENTER" maxWidth="Infinity" style="-fx-background-color: #ecf0f1; -fx-padding: 5;" text="ðŸ’¬ Chat / Guesses" textFill="#7f8c8d">
                        <font><Font name="System Bold" size="12.0" /></font>
                    </Label>
                    <TextArea fx:id="chatArea" editable="false" wrapText="true" VBox.vgrow="ALWAYS" />
                    <HBox spacing="5" style="-fx-padding: 8; -fx-background-color: #eee;">
                        <TextField fx:id="chatInput" promptText="Type here..." HBox.hgrow="ALWAYS" />
                        <Button fx:id="btnSend" style="-fx-background-color: #2980b9; -fx-text-fill: white;" text="Send" />
                    </HBox>
                </VBox>
            </SplitPane>
        </right>
    </BorderPane>

    <VBox fx:id="lobbyOverlay" alignment="CENTER" spacing="30.0" style="-fx-background-color: rgba(0,0,0,0.85);">
        <Label text="Waiting for Players..." textFill="WHITE"><font><Font name="System Bold" size="32.0" /></font></Label>
        <HBox fx:id="lobbyCirclesBox" alignment="CENTER" prefHeight="120.0" spacing="30.0" />
        <Label style="-fx-font-style: italic;" text="(Green Circle = Ready)" textFill="#cccccc" />
        <HBox alignment="CENTER" spacing="30">
            <Button fx:id="btnReady" prefHeight="50.0" prefWidth="160.0" style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-size: 18px;" text="READY" />
            <Button fx:id="btnStartGame" prefHeight="50.0" prefWidth="160.0" style="-fx-background-color: #e67e22; -fx-text-fill: white; -fx-font-size: 18px;" text="START GAME" visible="false" />
        </HBox>
    </VBox>
</StackPane>